!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="f20ec181-0231-4e13-a864-b1cbde41c076",t._sentryDebugIdIdentifier="sentry-dbid-f20ec181-0231-4e13-a864-b1cbde41c076")}catch(t){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8482],{24557:function(t,e,n){n.d(e,{e:function(){return h}});var i=n(85893),s=n(67294),a=n(52899),o=n(77146),l=n(29869);let r="black",c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{y:"up"},n=arguments.length>2?arguments[2]:void 0,i=(0,s.useRef)(null),c=(0,s.useMemo)(()=>String.fromCharCode(65+Math.floor(26*Math.random())+Date.now()),[]),h="".concat(c,"_arrow"),{isOpen:d,open:u,onClose:p}=(0,o.O)();(0,a.t)(i,d,p);let{width:f}=(0,l.i)();(0,s.useEffect)(()=>{if(!i.current)return;let t=m(),e=y();if(d){let{hideArrow:n}=k(t,i.current);n||v(e,i.current)}else g(t),C(e);return()=>{g(m()),C(y())}},[d,t]);let m=()=>{let t=document.getElementById(c);if(t)return t;let e=document.createElement("div");return e.style.zIndex="9999",e.id=c,n&&e.setAttribute("data-testid",n),document.body.appendChild(e),e},g=t=>{t.remove()},k=(e,n)=>{e.style.display="inline-block",e.style.position="fixed";let i=document.createElement("div");i.innerHTML="".concat(t),i.style.color="white",i.style.minWidth="100px",i.style.textAlign="center",e.appendChild(i),e.style.wordBreak="break-all",e.style.backgroundColor=r,e.style.padding="1rem",e.style.borderRadius="5px";let{left:s,top:a,hideArrow:o}=T(e,n);return e.style.left="".concat(s,"px"),e.style.top="".concat(a,"px"),{hideArrow:o}},v=(t,e)=>{t.style.backgroundColor=r,t.style.width="16px",t.style.height="16px",t.style.display="inline-block",t.style.zIndex="9999",t.style.position="fixed",t.style.transform="rotate(45deg)",document.body.appendChild(t);let{left:n,top:i}=w(t,e);return t.style.left="".concat(n,"px"),t.style.top="".concat(i,"px"),t},w=(t,n)=>{var s,a;let{left:o,top:l}=n.getBoundingClientRect();return l-=t.getBoundingClientRect().height,o+=-8+(null!==(a=null===(s=i.current)||void 0===s?void 0:s.getBoundingClientRect().width)&&void 0!==a?a:0)/2,"down"===e.y&&(l=n.getBoundingClientRect().y+n.getBoundingClientRect().height+5),{left:o,top:l}},C=t=>{t.remove()},y=()=>{let t=document.getElementById(h);if(t)return t;let e=document.createElement("div");return e.id=h,e},T=(t,n)=>{var s,a;let o=!1,{left:l,top:r,height:c}=n.getBoundingClientRect(),{width:h,height:d}=t.getBoundingClientRect();if(r-=10+t.getBoundingClientRect().height,l-=h/2,l+=(null!==(a=null===(s=i.current)||void 0===s?void 0:s.getBoundingClientRect().width)&&void 0!==a?a:0)/2,window.innerWidth<h+l){let t=Math.abs(window.innerWidth-(l+h));l-=t}return l<0&&(l=0),"down"===e.y&&(r=n.getBoundingClientRect().y+n.getBoundingClientRect().height+10),r<=0&&(r=c+d+r+20,o=!0),{left:l,top:r,hideArrow:o}};return{width:f,show:u,hide:p,parentRef:i}},h=t=>{let{children:e,text:n,position:s,containerClassNames:a,inactive:o,testId:l}=t,{show:r,hide:h,parentRef:d}=c(n,s,l);return o?(0,i.jsx)(i.Fragment,{children:e}):(0,i.jsx)("div",{className:"cursor-pointer inline-block select-none ".concat(a),onMouseEnter:r,onMouseLeave:h,onClick:r,ref:d,children:e})}},50239:function(t,e,n){n.d(e,{g:function(){return i}});let i=120},83190:function(t,e,n){n.d(e,{U:function(){return m}});var i=n(72383),s=n(65342),a=n.n(s),o=n(69391);let l=(t,e,n)=>{let i=Number(e)*n/100,s=(0,o.t)(i/t);return"".concat(Math.round(Number(s.split(" ")[0]))," ").concat(s.split(" ")[1])};var r=n(78721),c=n(97885),h=n(7727),d=n(50239);class u{async startImport(){let t=new r.M(this.task,{handleDisconnect:this.handleDisconnect,handleReconnect:this.handleReconnect,handleTaskComplete:t=>{this.handleTaskComplete(t)},handleTaskFail:this.handleTaskFail,onOfflineLimitReach:this.handleOfflineLimit});await t.appendTask(!1),this.init()}init(){var t,e;this.r&&this.r.pause();let n=null===(e=this.task.result)||void 0===e?void 0:null===(t=e.form)||void 0===t?void 0:t.url.toString();if(!n||!this.file||!this.file.file){this.options.onFailure(this.task,this.metaData);return}let s=this.file.file,o=(0,i.Z)(this.file.file),r=new(a())({chunkRetryInterval:3e3,target:n.replace("api/upload","api/resumable").replace("server","s"),chunkSize:2097152,forceChunkSize:!0,prioritizeFirstAndLastChunk:!0,testChunks:!1,generateUniqueIdentifier:()=>{let t=s.webkitRelativePath||s.name,e=s.size;return t.length<40?e+"-"+Math.floor(1e3*Math.random()+5e3)+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,"")+"."+o:e+"-"+Math.floor(1e3*Math.random()+5e3)+"-"+(t=t.replace(/[^0-9a-zA-Z_-]/gim,"")).substring(0,20)+"-"+t.substring(t.length-20)+"."+o}});this.r=r;let c=new Date;r.addFile(this.file.file),r.on("fileAdded",()=>{r.upload()}),r.on("fileError",()=>{this.options.onFailure(this.task,this.metaData)}),r.on("fileProgress",()=>{let t=Math.round(100*r.progress()),e=(new Date().getTime()-c.getTime())/1e3;this.options.onProgress(this.task,t,l(e,t,this.file.file.size),this.metaData)}),r.on("fileSuccess",(t,e)=>{let n=JSON.parse(e).fileUploadStatus;("done"===n||"partly_done"===n)&&r.on("complete",()=>{"resumable"===this.state&&this.handleJoin()})})}cancel(){this.r&&(this.r.pause(),this.r.cancel(),this.r=null,this.options={onComplete:()=>{},onFailure:()=>{},onOfflineLimitReach:()=>{},onProgress:()=>{}})}handleJoin(){var t,e,n,i,s,a;if(this.state="join",this.joinTryCount>d.g){this.handleTaskFail(this.task);return}this.joinTryCount++,console.log("handleJoin trying for ".concat(this.joinTryCount," time(s)"));let o=null===(e=this.task.result)||void 0===e?void 0:null===(t=e.form)||void 0===t?void 0:t.url.toString();if(!o||!this.r||!(null===(i=this.task.result)||void 0===i?void 0:null===(n=i.form)||void 0===n?void 0:n.parameters.signature))return;let l=new FormData;l.append("identifier",this.getIdentifier()),l.append("signature",null!==(a=null===(s=this.task.result.form)||void 0===s?void 0:s.parameters.signature)&&void 0!==a?a:""),h.Z.post(o.replace("api/upload","api/resumable/join").replace("server","s"),l).then(()=>{this.handleConfirm()}).catch(()=>{setTimeout(()=>{console.log("retrying handleJoin"),this.handleJoin()},5e3)})}handleConfirm(){var t,e,n,i,s,a;if(this.state="confirm",this.confirmTryCount>d.g){this.handleTaskFail(this.task);return}this.confirmTryCount++;let o=null===(e=this.task.result)||void 0===e?void 0:null===(t=e.form)||void 0===t?void 0:t.url.toString();if(!o||!this.r||!(null===(i=this.task.result)||void 0===i?void 0:null===(n=i.form)||void 0===n?void 0:n.parameters.signature))return;let l=new FormData;l.append("identifier",this.getIdentifier()),l.append("fileName",this.file.file.name),l.append("signature",null!==(a=null===(s=this.task.result.form)||void 0===s?void 0:s.parameters.signature)&&void 0!==a?a:""),h.Z.post(o.replace("server","s"),l).then(async()=>{this.isAcknowledgementComplete=!0,this.completedTask&&!this.hasCompleted&&(this.hasCompleted=!0,this.options.onComplete(this.completedTask,this.metaData))}).catch(()=>{setTimeout(()=>{this.handleConfirm()},5e3)}),this.taskCompleteTimeout=setTimeout(()=>{this.hasCompleted||(0,c.S)("event","Upload Stuck",{event_category:"/"===window.location.pathname?"Image Resizer":window.location.pathname,event_label:"Upload"})},1e4)}getIdentifier(){return this.r?this.r.files.map(t=>t.uniqueIdentifier).join(","):""}constructor(t,e,n,i){this.completedTask=null,this.r=null,this.hasCompleted=!1,this.isAcknowledgementComplete=!1,this.taskCompleteTimeout=null,this.joinTryCount=0,this.confirmTryCount=0,this.state="resumable",this.handleTaskComplete=t=>{this.completedTask=t,this.isAcknowledgementComplete&&(this.options.onComplete(t,this.metaData),this.hasCompleted=!0,this.taskCompleteTimeout&&clearTimeout(this.taskCompleteTimeout))},this.handleOfflineLimit=t=>{this.options.onOfflineLimitReach&&this.options.onOfflineLimitReach(t,this.metaData)},this.handleTaskFail=t=>{var e,n;null===(e=this.r)||void 0===e||e.pause(),null===(n=this.r)||void 0===n||n.cancel(),this.options.onFailure(t,this.metaData),this.cancel()},this.handleReconnect=()=>{this.r&&this.r.upload(),this.options.onReconnect&&this.options.onReconnect(this.task,this.metaData)},this.handleDisconnect=()=>{this.r&&this.r.pause(),this.options.onDisconnect&&this.options.onDisconnect(this.task,this.metaData)},this.task=t,this.file=e,this.options=n,this.metaData=i}}var p=n(67294);let f=[],m=t=>{let e=async(e,i,s)=>{t.onStart(i,s,0);let a=new u(i,e,{...t,onOfflineLimitReach:n},s);await a.startImport(),f.push(a)},n=(e,n)=>{t.onOfflineLimitReach&&t.onOfflineLimitReach(e,n);let i=f.find(t=>t.task.id===e.id);null==i||i.cancel()};return(0,p.useEffect)(()=>()=>{(void 0===t.shouldCancelOnUnmount||!1!==t.shouldCancelOnUnmount)&&f.forEach(t=>t.cancel())},[]),{handleDeviceCancel:t=>{let e=f.find(e=>e.task.id===t.id);null==e||e.cancel()},handleDeviceImport:e,handleCancelAllDeviceImports:()=>{f.forEach(t=>t.cancel())}}}},88609:function(t,e,n){n.d(e,{N:function(){return s}});var i=n(67294);let s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,e=(0,i.useRef)(null);return n=>{e.current&&clearTimeout(e.current),e.current=setTimeout(n,t)}}},29869:function(t,e,n){n.d(e,{i:function(){return s}});var i=n(67294);function s(){let[t,e]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight});return a(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),t}let a=i.useLayoutEffect},90495:function(t,e,n){var i=n(9669);let s=n.n(i)().create({headers:{}});s.interceptors.request.use(async t=>t,t=>Promise.reject(t)),e.Z=s},78721:function(t,e,n){n.d(e,{M:function(){return d}});var i=n(79998),s=n(29731);let a=null,o=null,l=[],r=null;class c{async appendTask(t,e){let n=await this.getSocket();l.push({task:t,options:e}),this.subscribe(t,n),this.addCypressEventListener(t,e)}async getSocket(){return r||(null==(r=await (0,s.h)())||r.on("task_failed",t=>{this.handleTaskFailed(t)}),null==r||r.on("task_started",t=>{this.handleTaskStart(t)}),null==r||r.on("task_completed",t=>{this.handleTaskComplete(t)}),r.on("disconnect",this.handleDisconnect),r.on("reconnect",this.handleReconnect)),r}subscribe(t,e){e.emit("subscribe","task.".concat(t.id))}addInternetEventListeners(){window.addEventListener("online",this.handleReconnect),window.addEventListener("offline",this.handleDisconnect)}addCypressEventListener(t,e){window.Cypress&&document.body.addEventListener("task_failed.".concat(t.id),t=>{e.handleTaskFail(t.task)})}setOfflineLimitWatcher(){o||(o=setInterval(()=>{a&&new Date().getTime()-a.getTime()>=6e5&&(this.removeOfflineLimitWatcher(),l.forEach(t=>t.options.onOfflineLimitReach&&t.options.onOfflineLimitReach(t.task)))},1e3))}removeOfflineLimitWatcher(){o&&clearInterval(o)}constructor(){this.handleTaskComplete=t=>{let e=l.find(e=>t.id===e.task.id);e&&(e.options.handleTaskComplete(t),l=l.filter(e=>e.task.id!==t.id))},this.handleTaskStart=t=>{var e,n;let i=l.find(e=>t.id===e.task.id);i&&(null===(e=(n=i.options).handleTaskStart)||void 0===e||e.call(n,t))},this.handleTaskFailed=t=>{l.forEach(e=>{e.task.id===t.id&&e.options.handleTaskFail(t)})},this.handleReconnect=async()=>{let t=await this.getSocket();t.on("disconnect",this.handleDisconnect),t.on("reconnect",this.handleReconnect),l.forEach(e=>{e.options.handleReconnect&&e.options.handleReconnect(),this.subscribe(e.task,t)}),this.removeOfflineLimitWatcher(),(await Promise.all(l.map(t=>h(t)))).forEach(t=>t.isCompleted&&t.task.options.handleTaskComplete(t.task.task))},this.handleDisconnect=()=>{a=new Date,this.setOfflineLimitWatcher(),l.forEach(t=>t.options.handleDisconnect&&t.options.handleDisconnect())},this.setOfflineLimitWatcher(),this.addInternetEventListeners()}}let h=async t=>{let{error:e,result:n}=await (0,i.U)("/api/tasks/".concat(t.task.id));return e||!n||"completed"!==n.status?{task:t,isCompleted:!1}:{task:{...t,task:n},isCompleted:!0}};class d{async appendTask(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];await this.initSocket(),t&&this.checkStatus()}async initSocket(){let t=new c;await t.appendTask(this.task,{handleDisconnect:this.options.handleDisconnect,handleReconnect:this.options.handleReconnect,handleTaskStart:this.options.handleTaskStart,handleTaskComplete:t=>{this.handleTaskComplete(t)},handleTaskFail:this.handleTaskFail,onOfflineLimitReach:this.options.onOfflineLimitReach})}async checkStatus(){if(this.isComplete)return!0;let{result:t,error:e}=await (0,i.U)("/api/tasks/".concat(this.task.id));return e||!t?(this.handleTaskFail(this.task),!1):"completed"===t.status?(this.options.handleTaskComplete(t),!0):("failed"===t.status&&this.options,!1)}constructor(t,e){this.isComplete=!1,this.handleTaskComplete=async t=>{this.isComplete||(this.isComplete=!0,this.options.handleTaskComplete(t))},this.handleTaskFail=t=>{this.options.handleTaskFail(t)},this.task=t,this.options=e}}},14743:function(t,e,n){n.d(e,{ga:function(){return i}});let i=(t,e)=>{let{hitType:n,page:i,title:s}=e;if(console.log("ga event: ".concat(t,", hitType: ").concat(n,", page: ").concat(i,", title: ").concat(s)),window.ga&&window.ga.getAll){var a,o;let e=null!==(o=null===(a=window.ga.getAll()[0])||void 0===a?void 0:a.get("name"))&&void 0!==o?o:"";window.ga("".concat(e,".").concat(t),{hitType:n,page:i,title:s})}else{let e=setInterval(()=>{if(window.ga&&window.ga.getAll){var a,o;let l=null!==(o=null===(a=window.ga.getAll()[0])||void 0===a?void 0:a.get("name"))&&void 0!==o?o:"";window.ga("".concat(l,".").concat(t),{hitType:n,eventAction:"click",page:i,title:s}),clearInterval(e)}},50)}}},97885:function(t,e,n){n.d(e,{S:function(){return i}});let i=(t,e,n)=>{if(window.gtag)window.gtag(t.toString(),e,n);else{let i=setInterval(()=>{window.gtag&&(window.gtag(t.toString(),e,n),clearInterval(i))},50)}}},19108:function(t,e,n){n.d(e,{k:function(){return i}});let i=t=>t.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},29731:function(t,e,n){n.d(e,{h:function(){return d}});var i=n(90495),s=n(9367);let a=null,o=[],l=!1,r={LIVE:"https://notification.freeconvert.com/",SANDBOX:"https://dev-notification.freeconvert.com/",PREPROD:"https://preprod-notification.freeconvert.com/"},c={LIVE:"https://api.freeconvert.com/v1/account/guest",SANDBOX:"https://dev-api.freeconvert.com/v1/account/guest",PREPROD:"https://preprod-api.freeconvert.com/v1/account/guest"},h="LIVE",d=async()=>{if(a)return a;if(l)return new Promise(t=>{o.push(t)});let t=await p();return a=(0,s.io)(r[h],{transports:["websocket"],auth:{token:"Bearer ".concat(t)}}),o.forEach(t=>a&&t(a)),o=[],l=!1,a},u="";async function p(){return u||(u=(await i.Z.get(c[h])).data)}},40524:function(t,e,n){n.d(e,{_:function(){return i}});let i=async t=>new Promise(e=>{let n=setTimeout(()=>{e(void 0),clearTimeout(n)},null!=t?t:10)})}}]);
//# sourceMappingURL=8482-1ef888053f019135.js.map